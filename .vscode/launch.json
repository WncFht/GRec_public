{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "text_generation",
            "type": "debugpy",
            "request": "launch",
            "module": "src.text_generation.evaluate",
            "args": [
                "--ckpt_path",
                "./ckpt/Instruments/Qwen2-VL-7B-Instruct-seqrec-item2index-1-qwen7B/checkpoint-84892",
                "--model_type",
                "qwen2_vl",
                "--test_batch_size",
                "8",
                "--test_prompt_ids",
                "0",
                "--index_file",
                ".index_qwen7B.json"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "2",
                "PYTHONPATH": "${workspaceFolder}",
            }, 
        },
        {
            "name": "test_without_id",
            "type": "debugpy",
            "request": "launch",
            "module": "src.infer.test_without_id",
            "args": [
                "--config_file",
                "./config/qwen_vl_finetune_seqrec_withoutid_test.yml"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "2",
                "PYTHONPATH": "${workspaceFolder}",
                "CKPT_PATH": "/home/fanghaotian/src/GRec/ckpt/base_model/Qwen2.5-VL-3B-Instruct"
            },
        },
        {
            "name": "dataset and collator",
            "type": "debugpy",
            "request": "launch",
            "module": "src.data",
            "env": {
                "CUDA_VISIBLE_DEVICES": "2",
                "PYTHONPATH": "${workspaceFolder}"
            },
            "args": [
                "--config_file",
                "./config/qwen_vl_finetune_seqrec.yml"
            ]
        },
        {
            "name": "qwen_vl_finetune_seqrec",
            "type": "debugpy",
            "request": "launch",
            "module": "src.finetune.qwen_vl_finetune_with_id",
            "args": [
                "--config_file",
                "./config/qwen_vl_finetune_seqrec_with_id.yml"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "1",
                "PYTHONPATH": "${workspaceFolder}"
            },
            "justMyCode": false,
            "stopOnEntry": false,
            "python": "${command:python.interpreterPath}"
        },
        {
            "name": "qwen_vl_finetune_seqrec_test",
            "type": "debugpy",
            "request": "launch",
            "module": "src.seqrec.evaluate",
            "args": [
                "--config_file",
                "./config/qwen_vl_finetune_seqrec_test.yml"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "1",
                "PYTHONPATH": "${workspaceFolder}"
            },
            "justMyCode": false,
            "stopOnEntry": false,
            "python": "${command:python.interpreterPath}"
        },
        {
            "name": "qwen_vl_finetune_seqrec_withoutid",
            "type": "debugpy",
            "request": "launch",
            "module": "src.finetune.qwen_vl_finetune_without_itemid",
            "args": [
                "--config_file",
                "./config/qwen_vl_finetune_seqrec_withoutid.yml"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "0",
                "PYTHONPATH": "${workspaceFolder}"
            },
            "justMyCode": false,
            "stopOnEntry": false,
            "python": "${command:python.interpreterPath}"
        },
        {
            "name": "infer_seqrec_without_itemid",
            "type": "debugpy",
            "request": "launch",
            "module": "src.infer.test_seqrec_without_itemid",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "2",
                "PYTHONPATH": "${workspaceFolder}",
                // "CKPT_PATH": "/home/fanghaotian/src/GRec/ckpt/Instruments/Qwen2.5-VL-3B-Instruct-finetune-seqrec-qwen7B-withtout-id-1/checkpoint-3184"
                "CKPT_PATH": "/home/fanghaotian/src/GRec/ckpt/base_model/Qwen2.5-VL-3B-Instruct"
            },
            "justMyCode": false,
            "stopOnEntry": false,
            "python": "${command:python.interpreterPath}"
        },
        {
            "name": "infer_seqrec_with_item_id",
            "type": "debugpy",
            "request": "launch",
            "module": "src.infer.test_seqrec_with_item_id",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "6",
                "PYTHONPATH": "${workspaceFolder}",
                // "CKPT_PATH": "/home/fanghaotian/src/GRec/ckpt/Instruments/Qwen2.5-VL-3B-Instruct-finetune-seqrec-qwen7B-with-id-0.1/checkpoint-796",
                "CKPT_PATH": "/home/fanghaotian/src/GRec/ckpt/Instruments/Qwen2-VL-2B-Instruct-finetune-seqrec-qwen7B-with-id-1-freeze/checkpoint-2653",
                // "MODEL_TYPE": "qwen2_5_vl"
                "MODEL_TYPE": "qwen_2_vl"
            },
            "justMyCode": false,
            "stopOnEntry": false,
            "python": "${command:python.interpreterPath}"
        },
        {
            "name": "test_with_id",
            "type": "debugpy",
            "request": "launch",
            "module": "src.infer.test_with_id",
            "args": [
                "--config_file",
                "./config/qwen_vl_finetune_seqrec_with_id_test_1.yml"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "6",
                "PYTHONPATH": "${workspaceFolder}",
                // "CKPT_PATH": "/home/fanghaotian/src/GRec/ckpt/Instruments/Qwen2.5-VL-3B-Instruct-finetune-seqrec-qwen7B-with-id-0.1/checkpoint-796",
                "CKPT_PATH": "/home/fanghaotian/src/GRec/ckpt/Instruments/Qwen2-VL-2B-Instruct-finetune-seqrec-qwen7B-with-id-1-freeze/checkpoint-10612",
                // "MODEL_TYPE": "qwen2_5_vl"
                "MODEL_TYPE": "qwen_2_vl"
            },
        },
        {
            "name": "qwen_vl_finetune_seqrec_with_title",
            "type": "debugpy",
            "request": "launch",
            "module": "src.finetune.qwen_vl_finetune_with_title",
            "args": [
                "--config_file",
                "./config/qwen_vl_finetune_seqrec_with_title.yml"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "5",
                "PYTHONPATH": "${workspaceFolder}"
            },
            "justMyCode": false,
            "stopOnEntry": false,
            "python": "${command:python.interpreterPath}"
        },
        {
            "name": "qwen_2_vl_finetune_with_id_freeze",
            "type": "debugpy",
            "request": "launch",
            "module": "src.finetune.qwen_2_vl_finetune_with_id_freeze",
            "args": [
                "--config_file",
                "./config/qwen_2_vl_finetune_seqrec_with_id_1.yml"
            ],
            "env": {
                "CUDA_VISIBLE_DEVICES": "7",
                "PYTHONPATH": "${workspaceFolder}"
            },
            "justMyCode": false,
            "stopOnEntry": false,
            "python": "${command:python.interpreterPath}"
        },
        {
            "name": "multimask", // bash scripts/finetune/multimask.sh
            "type": "debugpy",
            "request": "launch",
            "module": "src.finetune.multitask_finetune",
            "args": [
                "--seed",
                "42",
                "--base_model",
                "Qwen/Qwen2.5-VL-3B-Instruct",
                "--model_type",
                "qwen2_5_vl",
                "--output_dir",
                "./ckpt/Instruments/Qwen2.5-VL-3B-Instruct-seqrec-item2index-0.1-qwen7B",
                "--dataset",
                "Instruments",
                "--data_path",
                "./data",
                "--per_device_batch_size",
                "16",
                "--epochs",
                "4",
                "--weight_decay",
                "0.01",
                "--save_and_eval_strategy",
                "epoch",
                "--bf16",
                "--freeze",
                "visual",
                "--only_train_response",
                "--tasks",
                "seqrec,item2index,index2item",
                "--train_prompt_sample_num",
                "1,1,1",
                "--train_data_sample_num",
                "0,0,0",
                "--ratio_dataset",
                "0.1",
                "--index_file",
                ".index_qwen7B.json"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "3",
                "PYTHONPATH": "${workspaceFolder}"
            },
            "justMyCode": false,
            "stopOnEntry": false,
            "python": "${command:python.interpreterPath}"
        },
        {
            "name": "info_nce_seqrec_2_2b", // bash scripts/finetune/info_nce_seqrec_2_2B.sh
            "type": "debugpy",
            "request": "launch",
            "module": "src.finetune.info_nce_seqrec_train",
            "args": [
                "--seed",
                "42",
                "--base_model",
                "Qwen/Qwen2-VL-2B-Instruct",
                "--model_type",
                "qwen2_vl",
                "--output_dir",
                "./ckpt/Instruments/Qwen2-VL-2B-Instruct-seqrec-info_nce-0.001-qwen7B",
                "--dataset",
                "Instruments",
                "--data_path",
                "./data",
                "--per_device_batch_size",
                "2",
                "--epochs",
                "4",
                "--weight_decay",
                "0.01",
                "--save_and_eval_strategy",
                "epoch",
                "--bf16",
                "--freeze",
                "visual",
                "--only_train_response",
                "--tasks",
                "seqrec",
                "--train_prompt_sample_num",
                "1",
                "--train_data_sample_num",
                "0",
                "--ratio_dataset",
                "0.001",
                "--index_file",
                ".index_qwen7B.json",
                "--temperature",
                "0.1",
                "--info_nce_weight",
                "1.0"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "6",
                "PYTHONPATH": "${workspaceFolder}"
            },
            "justMyCode": false,
            "stopOnEntry": false,
            "python": "${command:python.interpreterPath}"
        }
    ]
}
